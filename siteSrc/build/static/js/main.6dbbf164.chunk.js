(this.webpackJsonpsite=this.webpackJsonpsite||[]).push([[0],{72:function(e,a,t){e.exports=t(86)},77:function(e,a,t){},85:function(e,a,t){},86:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),l=t(10),c=t.n(l),o=(t(77),t(12)),s=t(137),i=t(87),u=t(125),m=t(134),d=t(127),g=t(43),p=t.n(g),h=t(126),f=t(120),E=t(123),b=Object(f.a)((function(e){return{paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(3)},submit:{margin:e.spacing(3,0,2)}}})),v=function(e){var a=e.username,t=e.password,n=e.email,l=e.onChange,c=e.onSend,o=b();return r.a.createElement(E.a,{component:"main",maxWidth:"xs"},r.a.createElement(u.a,null),r.a.createElement("div",{className:o.paper},r.a.createElement(s.a,{className:o.avatar},r.a.createElement(p.a,null)),r.a.createElement(h.a,{component:"h1",variant:"h5"},"Sign Up"),r.a.createElement("form",{className:o.form,noValidate:!0},r.a.createElement(d.a,{container:!0,spacing:2},r.a.createElement(d.a,{item:!0,xs:12},r.a.createElement(m.a,{value:a,onChange:l,autoComplete:"username",name:"username",variant:"outlined",required:!0,fullWidth:!0,id:"username",label:"User name",autoFocus:!0})),r.a.createElement(d.a,{item:!0,xs:12},r.a.createElement(m.a,{value:n,onChange:l,variant:"outlined",required:!0,fullWidth:!0,id:"email",label:"Email",name:"email",autoComplete:"email"})),r.a.createElement(d.a,{item:!0,xs:12},r.a.createElement(m.a,{value:t,onChange:l,variant:"outlined",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",autoComplete:"current-password"}))),r.a.createElement(i.a,{fullWidth:!0,variant:"contained",color:"primary",className:o.submit,onClick:c},"Sign Up"))))},j=t(135),O=t(24),k=Object(O.g)((function(e){var a=e.history,t=Object(n.useState)(""),l=Object(o.a)(t,2),c=l[0],s=l[1],i=Object(n.useState)(""),u=Object(o.a)(i,2),m=u[0],d=u[1],g=Object(n.useState)(""),p=Object(o.a)(g,2),h=p[0],f=p[1],E=Object(j.a)(["user"]),b=Object(o.a)(E,2),O=(b[0],b[1]);return r.a.createElement(v,{username:c,password:m,email:h,onChange:function(e){var a=e.target.value;switch(e.target.name){case"username":s(a);break;case"password":d(a);break;case"email":f(a);break;default:console.error("Wront event target name "+e.target.name)}},onSend:function(){fetch("/api/newUser",{method:"POST",headers:{"Content-Type":"application/json;charset=utf-8"},body:JSON.stringify({username:c,password:m,email:h})}).then((function(e){e.ok&&e.json().then((function(e){O("user",e.user),a.push("/users")}))}))}})})),w=t(25),C=Object(f.a)((function(e){return{paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(1)},registrate:{textDecoration:"none",marginTop:"0.5em"}}})),S=function(e){var a=e.username,t=e.password,n=e.onChange,l=e.onSend,c=C();return r.a.createElement(E.a,{component:"main",maxWidth:"xs"},r.a.createElement(u.a,null),r.a.createElement("div",{className:c.paper},r.a.createElement(s.a,{className:c.avatar},r.a.createElement(p.a,null)),r.a.createElement(h.a,{component:"h1",variant:"h5"},"Sign In"),r.a.createElement("form",{className:c.form,noValidate:!0},r.a.createElement(m.a,{value:a,variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"username",label:"User name",name:"username",autoComplete:"username",autoFocus:!0,onChange:n}),r.a.createElement(m.a,{value:t,variant:"outlined",margin:"normal",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",autoComplete:"current-password",onChange:n}),r.a.createElement(i.a,{fullWidth:!0,variant:"contained",color:"primary",className:c.submit,onClick:l},"Sign In")),r.a.createElement(w.b,{className:c.registrate,to:"/registration"},"Registrate new user")))},y=Object(O.g)((function(e){var a=e.history,t=Object(n.useState)(""),l=Object(o.a)(t,2),c=l[0],s=l[1],i=Object(n.useState)(""),u=Object(o.a)(i,2),m=u[0],d=u[1],g=Object(j.a)(["user"]),p=Object(o.a)(g,2),h=(p[0],p[1]);return r.a.createElement(S,{username:c,password:m,onChange:function(e){switch(e.target.name){case"username":s(e.target.value);break;case"password":d(e.target.value);break;default:console.error("Wrong event target name "+e.target.name)}},onSend:function(){fetch("/api/login",{method:"POST",headers:{"Content-Type":"application/json;charset=utf-8"},body:JSON.stringify({username:c,password:m})}).then((function(e){e.ok&&e.json().then((function(e){h("user",e.user),a.push("/users")}))}))}})})),D=t(46),W=t(58),x=t(130),N=t(131),T=t(133),U=t(132),I=t(128),A=t(129),B=t(136),q=function(e){var a=e.userID,t=e.username,n=e.email,l=e.registrationDate,c=e.lastLoginDate,o=e.isActive,s=e.selected,i=e.onChange;return r.a.createElement(I.a,{hover:!0,onClick:i},r.a.createElement(A.a,null,r.a.createElement(B.a,{onChange:i,checked:!!s})),r.a.createElement(A.a,null,a),r.a.createElement(A.a,null,t),r.a.createElement(A.a,null,n),r.a.createElement(A.a,null,new Date(l).toDateString()),r.a.createElement(A.a,null,new Date(c).toDateString()),r.a.createElement(A.a,null,o?"Active":"Blocked"))};var J=function(e){var a=e.users,t=e.selectedUsers,n=e.onBlock,l=e.onUnblock,c=e.onDelete,o=e.toggleSelect,s=e.allSelect,u=e.toggleAllSelect;return r.a.createElement(E.a,{maxWidth:"md"},r.a.createElement(x.a,{fullWidth:!0},r.a.createElement(i.a,{onClick:n},"Block"),r.a.createElement(i.a,{onClick:l},"Unblock"),r.a.createElement(i.a,{onClick:c},"Delete")),r.a.createElement(N.a,null,r.a.createElement(U.a,null,r.a.createElement(I.a,null,r.a.createElement(A.a,null,r.a.createElement(B.a,{checked:s,onChange:u})),r.a.createElement(A.a,null,"ID"),r.a.createElement(A.a,null,"Username"),r.a.createElement(A.a,null,"Email"),r.a.createElement(A.a,null,"Registration date"),r.a.createElement(A.a,null,"Last login date"),r.a.createElement(A.a,null,"Status"))),r.a.createElement(T.a,null,a.map((function(e){return function(e){var a=e.id,t=e.username,n=e.email,l=e.registrationDate,c=e.lastLoginDate,o=e.isActive,s=e.selected,i=e.onChange;return r.a.createElement(q,{key:a,userID:a,username:t,email:n,registrationDate:l,lastLoginDate:c,isActive:o,selected:s,onChange:i})}(Object(D.a)({selected:t[e.id],onChange:function(){o(e.id)}},e))})))))},P=Object(O.g)((function(e){var a=e.history,t=Object(n.useState)({}),l=Object(o.a)(t,2),c=l[0],s=l[1],i=Object(n.useState)(!1),u=Object(o.a)(i,2),m=u[0],d=u[1],g=Object(n.useState)([]),p=Object(o.a)(g,2),h=p[0],f=p[1],E=Object(j.a)(["user"]),b=Object(o.a)(E,3),v=b[0],O=(b[1],b[2]),k=Object(n.useCallback)((function(){fetch("/api/users").then((function(e){e.ok&&e.json().then((function(e){f(e)}))}))}),[]),w=Object(n.useCallback)((function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"block",a=[],t=0;t<h.length;t++)c[h[t].id]&&(a=[].concat(Object(W.a)(a),[h[t].id]));return fetch("/api/users",{method:"POST",headers:{"Content-Type":"application/json;charset=utf-8"},body:JSON.stringify({action:e,user:v.user,users:a})})}),[v.user,c,h]),C=Object(n.useCallback)((function(e,t){var n=function(){O("user"),a.push("/")};console.log(e),t.ok?e[v.user]&&n():n()}),[a,v.user,O]);return Object(n.useEffect)((function(){k()}),[k]),r.a.createElement(J,{users:h,selectedUsers:c,toggleSelect:function(e){var a=Object(D.a)({},c);a[e]=!a[e],d(!1),s(a)},allSelect:m,toggleAllSelect:function(){var e={};if(!m)for(var a=0;a<h.length;a++)e[h[a].id]=!0;s(e),d(!m)},onBlock:function(){console.log("block"),w("block").then((function(e){C(c,e),k()}))},onUnblock:function(){w("unblock").then((function(e){C([],e),k()}))},onDelete:function(){w("delete").then((function(e){C(c,e),k()}))}})}));t(85);var L=function(){var e=Object(j.a)(["user"]),a=Object(o.a)(e,3),t=a[0];return a[1],a[2],r.a.createElement("div",{className:"App"},r.a.createElement(w.a,null,r.a.createElement(O.d,null,r.a.createElement(O.b,{path:"/users"},r.a.createElement(P,null)),r.a.createElement(O.b,{path:"/registration"},r.a.createElement(k,null)),r.a.createElement(O.b,{path:"/auth"},r.a.createElement(y,null)),r.a.createElement(O.b,{path:"/"},r.a.createElement(O.a,{to:t.user?"/users":"/auth"})))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(L,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[72,1,2]]]);
//# sourceMappingURL=main.6dbbf164.chunk.js.map